<div class="row">
    <div class="col-md-2">
        <div class="btn-group-vertical">
            <input id="disable" class="btn btn-danger" value="禁用" />
            <input id="enable" class="btn btn-success" value="启用" />
            <button id="select2SetValue" class="btn btn-primary">设置Alaska value=AK</button>
            <button id="select2Open" class="btn btn-primary">打开</button>
            <button id="select2Colse" class="btn btn-primary">关闭</button>
            <button id="select2Init" class="btn btn-primary">初始化</button>
            <button id="select2Destroy" class="btn btn-primary">摧毁</button>
            <button id="select2SetMultipleValue" class="btn btn-primary">设置多个值</button>
            <button id="select2Clear" class="btn btn-primary">清空</button>
        </div>
    </div>

    <div class="col-md-5">
        <select multiple="multiple" id="select2" class="select2-container form-control">
            <optgroup label="Alaskan/Hawaiian Time Zone">
                <option value="AK">Alaska</option>
                <option value="HI" disabled="disabled">Hawaii(disabled)</option>
            </optgroup>
            <optgroup label="Pacific Time Zone">
                <option value="CA">California</option>
                <option value="NV">Nevada</option>
                <option value="OR">Oregon</option>
                <option value="WA">Washington</option>
            </optgroup>
            <optgroup label="Mountain Time Zone">
                <option value="AZ">Arizona</option>
                <option value="CO">Colorado</option>
                <option value="ID">Idaho</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NM">New Mexico</option>
                <option value="ND">North Dakota</option>
                <option value="UT">Utah</option>
                <option value="WY">Wyoming</option>
            </optgroup>
            <optgroup label="Central Time Zone">
                <option value="AL">Alabama</option>
                <option value="AR">Arkansas</option>
                <option value="IL">Illinois</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="OK">Oklahoma</option>
                <option value="SD">South Dakota</option>
                <option value="TX">Texas</option>
                <option value="TN">Tennessee</option>
                <option value="WI">Wisconsin</option>
            </optgroup>
            <optgroup label="Eastern Time Zone">
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="IN">Indiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="OH">Ohio</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WV">West Virginia</option>
            </optgroup>
        </select>
    </div>
    <div class="col-md-5">
        <select id="select2Array" class="form-control select2-container"></select>
    </div>
</div>

<div class="row">
    <div class="col-md-2">

    </div>

    <div class="col-md-5">
        <label class="label-success">支持添加自定义标签</label>
        <select id="tags" class="form-control" multiple></select>
    </div>

    <div class="col-md-5">
        <label class="label-success">Theme support</label>
        <select id="classic" class="form-control select2-container--default"></select>
    </div>
</div>

<div class="row">
    <div class="col-md-2">
        <label class="info">自定义templateSelection templateResult</label>
    </div>
    <div class="col-md-10">
        <select class="form-control select2-container" id="formate" multiple></select>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <label class="label-default">图文结合的效果</label>
        <select class="form-control select2-container" id="imgSelect" multiple>
            <optgroup label="系统设置">
                <option value="1">用户管理</option>
                <option value="2">角色管理</option>
                <option value="3">部门管理</option>
                <option value="4">菜单管理</option>
            </optgroup>
            <optgroup label="订单管理">
                <option value="5">订单查询</option>
                <option value="6">订单导入</option>
                <option value="7">订单删除</option>
                <option value="8">订单撤销</option>
            </optgroup>
            <optgroup label="基础数据">
                <option value="9">基础数据维护</option>
            </optgroup>
        </select>
    </div>
    <div class="col-md-6">
        <label class="label-default">远程搜索功能（即在用户输入搜索内容时动态去后台取数据）</label>
        <select class="form-control select2-container" id="remoteSelect" multiple></select>
    </div>
</div>

@section scripts{
    <script type="text/javascript">
        $(function () {
            var dataFormate = [{ id: 0, text: 'enhancement' },
                     { id: 1, text: 'bug' },
                     { id: 2, text: 'duplicate' },
                     { id: 3, text: 'invalid' },
                     { id: 4, text: 'wontfix' }];
            function templateSelection(data, container) {
                return data.text + '11';
            }
            function templateResult(state) {
                return state.text + '22';
            };
            $('#formate').select2({
                selectOnClose: true,
                closeOnSelect: false,
                placeholder: 'This is my placeholder',
                allowClear: true,
                data: dataFormate,
                templateSelection: templateSelection,
                templateResult: templateResult
            });
            $('#tags').select2({
                tags: true,
                tokenSeparators: [',', ' '],
                language: 'zh-CN'
            });

            $('#disable').on('click', function () {
                $('#select2').prop('disabled', true);
                $('#select2Array').prop('disabled', true);
            });
            $('#enable').on('click', function () {
                $('#select2').prop('disabled', false);
                $('#select2Array').prop('disabled', false);
            });
            $('#select2SetValue').click(function () {
                $('#select2').val('AK').trigger('change');
            });
            $('#select2Open').click(function () {
                $('#select2').select2('open');
            });
            $('#select2Close').click(function () {
                $('#select2').select2('colse');
            });
            $('#select2Init').click(function () {
                $('#select2').select2();
            });
            $('#select2Destroy').click(function () {
                $('#select2').select2('destroy');
            });
            $('#select2SetMultipleValue').click(function () {
                $('#select2').val(['AK', 'MO', 'WV', 'VA']).trigger('change');
            });
            $('#select2Clear').click(function () {
                $('#select2').val(null).trigger('change');
            });
            $('#select2').select2({
                placeholder: "Select a state",
                allowClear: true,
                maximumSelectionLength: 3,
                closeOnSelect: false
            });
            var data = [{ id: 0, text: 'enhancement' },
                        { id: 1, text: 'bug' },
                        { id: 2, text: 'duplicate' },
                        { id: 3, text: 'invalid' },
                        { id: 4, text: 'wontfix' }];
            $('#select2Array').select2({
                data: data,
                minimumResultsForSearch: Infinity,
                dir: "rtl",
                theme: "classic"
            });
            $('#classic').select2({
                data: data, theme: "classic"
            });
            var $eventSelect = $('#select2');

            function log(msg, evt) {
                if (!evt) {
                    var args = "{}";
                } else {
                    var args = JSON.stringify(evt.params, function (key, value) {
                        if (value && value.nodeName) return "[DOM node]";
                        if (value instanceof $.Event) return "[$.Event]";
                        return value;
                    });
                }
                console.log(msg + args);
            }

            $eventSelect.on("select2:open", function (e) { log("select2:open", e); });
            $eventSelect.on("select2:close", function (e) { log("select2:close", e); });
            $eventSelect.on("select2:select", function (e) { log("select2:select", e); });
            $eventSelect.on("select2:unselect", function (e) { log("select2:unselect", e); });
        });
    </script>
    <script type="text/javascript">
        $(function () {
            function formatState(state) {
                if (!state.id) { return state.text; }
                // state.element.value.toLowerCase() = id
                //             var $state = $(
                //  '<span><img src="/content/images/' + state.element.value.toLowerCase() + '.ico" class="img-flag" /> ' + state.text + '</span>'
                //);
                var $state = $(
                  '<span><i class="fa fa-bank"></i>' + state.text + '</span>'
                );
                return $state;
            };
            //带图片
            $("#imgSelect").select2({
                templateResult: formatState,
                templateSelection: formatState
            });
            //格式化
            function formatRepoProvince(repo) {
                if (repo.loading) return repo.text;
                var markup = "<div>" + repo.name + "</div>";
                return markup;
            }
            //远程请求数据
            $('#remoteSelect').select2({
                ajax: {
                    url: "/JQueryPluginTest/GetProvinces",
                    dataType: 'json',
                    delay: 250,
                    type: "POST",
                    data: function (params) {
                        return {
                            q: params.term, // search term
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        params.page = params.page || 1;
                        return {
                            results: data.items,
                            pagination: {
                                more: (params.page * 10) < data.total_count
                            }
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 1,
                maximumSelectionLength: 3,
                templateResult: formatRepoProvince, // omitted for brevity, see the source of this page
                templateSelection: formatRepoProvince // omitted for brevity, see the source of this page
            });
        });
    </script>
}